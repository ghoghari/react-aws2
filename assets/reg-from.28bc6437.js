import{O as ae,P as i,_ as se,Q as re,V as te,r as s,b as D,c as P,e as c,j as a,E as n,$ as oe,W as q,a0 as le}from"./index.fb3bb849.js";import{u as ue}from"./index.esm.af7ad10b.js";import{o as ne}from"./yup.module.ca9c4ec8.js";import{C as ie}from"./Checkbox.a5bea6d2.js";const ce=ae({voterId:i().required("Voter ID is required").min(10,"Voter ID must be at least 10 characters").max(12,"Voter ID must not exceed 12 characters").matches(/^[A-Za-z0-9]+$/,"Voter ID must contain only letters and numbers"),mobile:i().required("Mobile number is required").matches(/^[0-9]{10}$/,"Invalid mobile number"),email:i().email("Invalid email").required("Email is required"),password:i().min(8,"Password must be at least 8 characters").max(20,"Password shouldn't be more than 20 characters").required("Please enter a password"),confirmpassword:i().oneOf([se("password"),null],"Passwords must match").required("Please confirm your password"),userId:i().required("User ID is required")}).required(),he=()=>{var f,k,S,C,I,N,E,V;const A=localStorage.getItem("token"),_=localStorage.getItem("_id"),$=re(),R=te(),[m,U]=s.exports.useState(""),[p,F]=s.exports.useState(""),[g,j]=s.exports.useState(""),[h,z]=s.exports.useState(""),[b,B]=s.exports.useState(""),[M,K]=s.exports.useState(""),[v,O]=s.exports.useState(""),[y,Q]=s.exports.useState(""),[d,T]=s.exports.useState(!1),[w,W]=s.exports.useState(!1),[o,x]=s.exports.useState([]),[Y,Z]=s.exports.useState([]),G=()=>W(!w),H=e=>{o.some(u=>u._id===o._id)?x(o.filter(u=>u._id!==o._id)):x([...o,e])},{register:l,handleSubmit:J,formState:{errors:r}}=ue({resolver:ne(ce),mode:"all"});console.log(r);const L=async()=>{const e=o.map(t=>({id:t._id,villageName:t.name})),u={cardNumber:m,email:h,userName:v,mobileNumber:g,password:b,role:y,fullName:p,villages:e};try{const t=await D.post(`${P}/api/addUser`,u,{headers:{Authorization:`Bearer ${A}`}});t.status===200&&(q.success("User Registered successfully!"),$(le(t.data)),R("/dashboard"))}catch(t){console.log(t),q.error("Failed to Register User")}},X=[{label:"Admin",value:"Admin"},{label:"Surveyor",value:"Surveyor"},{label:"Karyakarta",value:"Karyakarta"}];s.exports.useEffect(()=>{ee()},[]);const ee=async()=>{try{const e=await D.get(`${P}/api/surve/getAllVoterVillages/${_}`);Z(e.data.village),console.log(e.data.village,"kkkkkkkkkkkkkkkkkkk")}catch(e){console.log(e)}};return c("form",{onSubmit:J(L),className:"space-y-5",children:[c("div",{className:"grid grid-cols-2 gap-2",children:[a(n,{name:"voterId",label:"Voter ID / \u0913\u0933\u0916\u092A\u0924\u094D\u0930 \u0915\u094D\u0930.",type:"text",placeholder:"Enter your Voter ID",value:m,onChange:e=>U(e.target.value),error:(f=r.voterId)==null?void 0:f.message,register:l}),a(n,{name:"name",label:"Name / \u0928\u093E\u0935",type:"text",placeholder:"Enter your name",value:p,onChange:e=>F(e.target.value),error:(k=r.name)==null?void 0:k.message,register:l}),a(n,{name:"mobile",label:"Mobile / \u092E\u094B\u092C\u093E\u0908\u0932",type:"text",placeholder:"Enter your mobile",value:g,onChange:e=>j(e.target.value),error:(S=r.mobile)==null?void 0:S.message,register:l}),a(n,{name:"email",label:"Email / \u0908\u092E\u0947\u0932",type:"email",placeholder:"Enter your email",value:h,onChange:e=>z(e.target.value),error:(C=r.email)==null?void 0:C.message,register:l}),a(oe,{label:"Role / \u092A\u0926",className:"w-full",placeholder:"Select Role",value:y,onChange:e=>Q(e.target.value),options:X,error:(I=r.role)==null?void 0:I.message}),a(n,{name:"userId",label:"UserName / \u0935\u093E\u092A\u0930\u0915\u0930\u094D\u0924\u093E",type:"text",placeholder:"Enter your User ID",value:v,onChange:e=>O(e.target.value),error:(N=r.userId)==null?void 0:N.message,register:l}),a(n,{name:"password",label:"Password / \u0938\u0902\u0915\u0947\u0924\u0936\u092C\u094D\u0926",type:"password",placeholder:"Enter your password",value:b,onChange:e=>B(e.target.value),error:(E=r.password)==null?void 0:E.message,register:l}),a(n,{name:"confirmpassword",label:"Confirm Password / \u092A\u0941\u0937\u094D\u091F\u0940 \u0915\u0930\u093E",type:"password",placeholder:"Confirm your password",value:M,onChange:e=>K(e.target.value),error:(V=r.confirmpassword)==null?void 0:V.message,register:l})]}),c("div",{children:[a("label",{className:"block text-gray-700",children:"Select Villages / \u0917\u093E\u0935 "}),c("div",{className:"relative",children:[a("div",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#FFB033] cursor-pointer",onClick:G,children:"Select villages"}),w&&a("div",{className:"absolute z-10 mt-2 w-full bg-white border border-gray-300 rounded-md shadow-lg max-h-48 overflow-y-auto",children:Y.map((e,u)=>a("div",{className:"p-2",children:c("label",{className:"flex items-center",children:[a("input",{type:"checkbox",checked:o.some(t=>t._id===e._id),onChange:()=>H(e),className:"mr-2"}),e.name]})},u))})]}),c("p",{className:"text-sm text-gray-600 mt-2",children:["Selected: ",o.map(e=>e.name).join(", ")||"None"]})]}),a(ie,{label:"You accept our Terms and Conditions and Privacy Policy",value:d,onChange:()=>T(!d)}),a("button",{type:"submit",className:"btn btn-dark block w-full text-center",disabled:!d,children:"Create an account"})]})};export{he as R};
