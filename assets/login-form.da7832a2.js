import{K as _,N as y,O as C,P as w,Q as D,V as E,r as v,e as b,j as u,E as N,L as P,b as j,c as F,W as k,X as K}from"./index.fb3bb849.js";import{u as M}from"./index.esm.af7ad10b.js";import{o as Q}from"./yup.module.ca9c4ec8.js";import{C as U}from"./Checkbox.a5bea6d2.js";var S,g,h=0,p=0;function V(e,i,m){var s=i&&m||0,a=i||new Array(16);e=e||{};var f=e.node||S,t=e.clockseq!==void 0?e.clockseq:g;if(f==null||t==null){var c=e.random||(e.rng||_)();f==null&&(f=S=[c[0]|1,c[1],c[2],c[3],c[4],c[5]]),t==null&&(t=g=(c[6]<<8|c[7])&16383)}var n=e.msecs!==void 0?e.msecs:Date.now(),d=e.nsecs!==void 0?e.nsecs:p+1,x=n-h+(d-p)/1e4;if(x<0&&e.clockseq===void 0&&(t=t+1&16383),(x<0||n>h)&&e.nsecs===void 0&&(d=0),d>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");h=n,p=d,g=t,n+=122192928e5;var r=((n&268435455)*1e4+d)%4294967296;a[s++]=r>>>24&255,a[s++]=r>>>16&255,a[s++]=r>>>8&255,a[s++]=r&255;var l=n/4294967296*1e4&268435455;a[s++]=l>>>8&255,a[s++]=l&255,a[s++]=l>>>24&15|16,a[s++]=l>>>16&255,a[s++]=t>>>8|128,a[s++]=t&255;for(var o=0;o<6;++o)a[s+o]=f[o];return i||y(a)}const $=C({userName:w().required("Username is required"),password:w().required("Password is required")}).required(),X=()=>{const e=D(),i=E(),[m,s]=v.exports.useState(!1),[a,f]=v.exports.useState(""),{register:t,formState:{errors:c},handleSubmit:n,setValue:d}=M({resolver:Q($),mode:"all"});return v.exports.useEffect(()=>{let r=localStorage.getItem("deviceId");r||(r=V(),localStorage.setItem("deviceId",r)),f(r)},[]),b("form",{onSubmit:n(async r=>{try{const l={userName:r.userName,password:r.password,deviceId:a},o=await j.post(`${F}/api/Login`,l),{token:I}=o.data.data;localStorage.setItem("token",I);const{_id:q}=o.data.data;localStorage.setItem("_id",q);const{userName:L}=o.data.data;localStorage.setItem("userName",L),o.status===200&&(k.success("Login successful!"),e(K(o.data)),i("/dashboard"))}catch(l){console.log(l),k.error("Login failed. Please check your credentials.")}}),className:"space-y-4",children:[u(N,{name:"userName",label:"Username",placeholder:"Enter your email as username",type:"text",register:t,error:c.userName,className:"h-[48px]"}),u(N,{name:"password",label:"Password",type:"password",placeholder:"Enter your password",register:t,error:c.password,className:"h-[48px]"}),b("div",{className:"flex justify-between",children:[u(U,{value:m,onChange:()=>s(!m),label:"Keep me signed in"}),u(P,{to:"/forgot-password",className:"text-sm text-slate-800 dark:text-slate-400 leading-6 font-medium",children:"Forgot Password?"})]}),u("button",{className:"btn btn-dark block w-full text-center",type:"submit",children:"Sign in"})]})};export{X as L};
