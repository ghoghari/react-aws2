import{O as ae,P as n,_ as re,Q as se,V as oe,r,b as D,c as q,e as d,j as a,T as i,$ as te,W as P,a0 as le}from"./index.b13c02d2.js";import{u as ue}from"./index.esm.5d09c1d1.js";import{o as ne}from"./yup.module.381bb469.js";import{C as ie}from"./Checkbox.e1130856.js";const de=ae({voterId:n().required("Voter ID is required"),name:n().required("Name is required"),mobile:n().required("Mobile number is required").matches(/^[0-9]{10}$/,"Invalid mobile number"),email:n().email("Invalid email").required("Email is required"),password:n().min(8,"Password must be at least 8 characters").max(20,"Password shouldn't be more than 20 characters").required("Please enter a password"),confirmpassword:n().oneOf([re("password"),null],"Passwords must match").required("Please confirm your password"),userId:n().required("User ID is required")}).required(),he=()=>{var k,x,S,N,C,I,E,V;const _=localStorage.getItem("token"),A=localStorage.getItem("_id"),R=se(),$=oe(),[m,U]=r.exports.useState(""),[p,F]=r.exports.useState(""),[g,j]=r.exports.useState(""),[h,B]=r.exports.useState(""),[b,M]=r.exports.useState(""),[T,z]=r.exports.useState(""),[v,K]=r.exports.useState(""),[w,O]=r.exports.useState(""),[c,Q]=r.exports.useState(!1),[y,W]=r.exports.useState(!1),[t,f]=r.exports.useState([]),[Y,G]=r.exports.useState([]),H=()=>W(!y),J=e=>{t.some(u=>u._id===t._id)?f(t.filter(u=>u._id!==t._id)):f([...t,e])},{register:l,handleSubmit:L,formState:{errors:s}}=ue({resolver:ne(de),mode:"all"});console.log(s);const X=async()=>{const e=t.map(o=>({id:o._id,villageName:o.name})),u={cardNumber:m,email:h,userName:v,mobileNumber:g,password:b,role:w,fullName:p,villages:e};try{const o=await D.post(`${q}/api/addUser`,u,{headers:{Authorization:`Bearer ${_}`}});o.status===200&&(P.success("User Registered successfully!"),R(le(o.data)),$("/dashboard"))}catch(o){console.log(o),P.error("Failed to Register User")}},Z=[{label:"Admin",value:"Admin"},{label:"Surveyor",value:"Surveyor"},{label:"Karyakarta",value:"Karyakarta"}];r.exports.useEffect(()=>{ee()},[]);const ee=async()=>{try{const e=await D.get(`${q}/api/surve/getAllVoterVillages/${A}`);G(e.data.village),console.log(e.data.village,"kkkkkkkkkkkkkkkkkkk")}catch(e){console.log(e)}};return d("form",{onSubmit:L(X),className:"space-y-5",children:[d("div",{className:"grid grid-cols-2 gap-2",children:[a(i,{name:"voterId",label:"Voter ID / \u0913\u0933\u0916\u092A\u0924\u094D\u0930 \u0915\u094D\u0930.",type:"text",placeholder:"Enter your Voter ID",value:m,onChange:e=>U(e.target.value),error:(k=s.voterId)==null?void 0:k.message,register:l}),a(i,{name:"name",label:"Name / \u0928\u093E\u0935",type:"text",placeholder:"Enter your name",value:p,onChange:e=>F(e.target.value),error:(x=s.name)==null?void 0:x.message,register:l}),a(i,{name:"mobile",label:"Mobile / \u092E\u094B\u092C\u093E\u0907\u0932",type:"number",placeholder:"Enter your mobile",value:g,onChange:e=>j(e.target.value),error:(S=s.mobile)==null?void 0:S.message,register:l}),a(i,{name:"email",label:"Email / \u0908\u092E\u0947\u0932",type:"email",placeholder:"Enter your email",value:h,onChange:e=>B(e.target.value),error:(N=s.email)==null?void 0:N.message,register:l}),a(te,{label:"Role / \u092A\u0926",className:"w-full",placeholder:"Select Role",value:w,onChange:e=>O(e.target.value),options:Z,error:(C=s.role)==null?void 0:C.message}),a(i,{name:"userId",label:"UserName / \u0935\u093E\u092A\u0930\u0915\u0930\u094D\u0924\u093E",type:"text",placeholder:"Enter your User ID",value:v,onChange:e=>K(e.target.value),error:(I=s.userId)==null?void 0:I.message,register:l}),a(i,{name:"password",label:"Password / \u0938\u0902\u0915\u0947\u0924\u0936\u092C\u094D\u0926",type:"password",placeholder:"Enter your password",value:b,onChange:e=>M(e.target.value),error:(E=s.password)==null?void 0:E.message,register:l}),a(i,{name:"confirmpassword",label:"Confirm Password / \u092A\u0941\u0937\u094D\u091F\u0940 \u0915\u0930\u093E",type:"password",placeholder:"Confirm your password",value:T,onChange:e=>z(e.target.value),error:(V=s.confirmpassword)==null?void 0:V.message,register:l})]}),d("div",{children:[a("label",{className:"block text-gray-700",children:"Select Villages / \u0917\u093E\u0935 "}),d("div",{className:"relative",children:[a("div",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#FFB033] cursor-pointer",onClick:H,children:"Select villages"}),y&&a("div",{className:"absolute z-10 mt-2 w-full bg-white border border-gray-300 rounded-md shadow-lg max-h-48 overflow-y-auto",children:Y.map((e,u)=>a("div",{className:"p-2",children:d("label",{className:"flex items-center",children:[a("input",{type:"checkbox",checked:t.some(o=>o._id===e._id),onChange:()=>J(e),className:"mr-2"}),e.name]})},u))})]}),d("p",{className:"text-sm text-gray-600 mt-2",children:["Selected: ",t.map(e=>e.name).join(", ")||"None"]})]}),a(ie,{label:"You accept our Terms and Conditions and Privacy Policy",value:c,onChange:()=>Q(!c)}),a("button",{type:"submit",className:"btn btn-dark block w-full text-center",disabled:!c,children:"Create an account"})]})};export{he as R};
