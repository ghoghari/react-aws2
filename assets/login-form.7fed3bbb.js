import{K as L,N as _,O as y,P as w,Q as C,V as D,r as v,e as b,j as u,T as k,L as P,b as j,c as E,W as N,X as F}from"./index.b13c02d2.js";import{u as K}from"./index.esm.5d09c1d1.js";import{o as M}from"./yup.module.381bb469.js";import{C as Q}from"./Checkbox.e1130856.js";var S,g,h=0,p=0;function T(e,i,m){var r=i&&m||0,a=i||new Array(16);e=e||{};var f=e.node||S,t=e.clockseq!==void 0?e.clockseq:g;if(f==null||t==null){var c=e.random||(e.rng||L)();f==null&&(f=S=[c[0]|1,c[1],c[2],c[3],c[4],c[5]]),t==null&&(t=g=(c[6]<<8|c[7])&16383)}var n=e.msecs!==void 0?e.msecs:Date.now(),d=e.nsecs!==void 0?e.nsecs:p+1,x=n-h+(d-p)/1e4;if(x<0&&e.clockseq===void 0&&(t=t+1&16383),(x<0||n>h)&&e.nsecs===void 0&&(d=0),d>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");h=n,p=d,g=t,n+=122192928e5;var s=((n&268435455)*1e4+d)%4294967296;a[r++]=s>>>24&255,a[r++]=s>>>16&255,a[r++]=s>>>8&255,a[r++]=s&255;var l=n/4294967296*1e4&268435455;a[r++]=l>>>8&255,a[r++]=l&255,a[r++]=l>>>24&15|16,a[r++]=l>>>16&255,a[r++]=t>>>8|128,a[r++]=t&255;for(var o=0;o<6;++o)a[r+o]=f[o];return i||_(a)}const U=y({userName:w().required("Username is required"),password:w().required("Password is required")}).required(),W=()=>{const e=C(),i=D(),[m,r]=v.exports.useState(!1),[a,f]=v.exports.useState(""),{register:t,formState:{errors:c},handleSubmit:n,setValue:d}=K({resolver:M(U),mode:"all"});return v.exports.useEffect(()=>{let s=localStorage.getItem("deviceId");s||(s=T(),localStorage.setItem("deviceId",s)),f(s)},[]),b("form",{onSubmit:n(async s=>{try{const l={userName:s.userName,password:s.password,deviceId:a},o=await j.post(`${E}/api/Login`,l),{token:q}=o.data.data;localStorage.setItem("token",q);const{_id:I}=o.data.data;localStorage.setItem("_id",I),o.status===200&&(N.success("Login successful!"),e(F(o.data)),i("/dashboard"))}catch(l){console.log(l),N.error("Login failed. Please check your credentials.")}}),className:"space-y-4",children:[u(k,{name:"userName",label:"Username",placeholder:"Enter your email as username",type:"text",register:t,error:c.userName,className:"h-[48px]"}),u(k,{name:"password",label:"Password",type:"password",placeholder:"Enter your password",register:t,error:c.password,className:"h-[48px]"}),b("div",{className:"flex justify-between",children:[u(Q,{value:m,onChange:()=>r(!m),label:"Keep me signed in"}),u(P,{to:"/forgot-password",className:"text-sm text-slate-800 dark:text-slate-400 leading-6 font-medium",children:"Forgot Password?"})]}),u("button",{className:"btn btn-dark block w-full text-center",type:"submit",children:"Sign in"})]})};export{W as L};
