import{r as t,u as ge,a as he,j as a,b as D,c as B,d as v,e as s,F as z,I as V,M as be,C as k}from"./index.fb3bb849.js";import{G as ve}from"./group-chart-1.1074c6ba.js";import{R as xe}from"./revenue-bar-chart.a47b47a8.js";import{_ as fe}from"./react-apexcharts.min.3babd216.js";import"./index.d7632401.js";import{H as Ne}from"./HomeBredCurbs.99ab7bed.js";const ye=()=>{const[g,P]=t.exports.useState(0),[h,A]=t.exports.useState(0),[u,M]=t.exports.useState(0),i=g+h,I=u-i,x=(g/u*100).toFixed(2),f=(h/u*100).toFixed(2),N=(I/u*100).toFixed(2),y=n=>{let b=0,o=0,m=0;n.forEach(p=>{b+=p.maleCount,o+=p.femaleCount,m+=p.totalCount}),P(b),A(o),M(m)},E=()=>{D.get(`${B}/api/surve/getAddressMaleFemaleCount`).then(n=>{y(n.data.data)}).catch(n=>{console.log(n)})};t.exports.useEffect(()=>{E()},[g,h,u]);const[d]=ge(),{width:C,breakpoints:S}=he();return a("div",{children:a(fe,{options:{chart:{toolbar:{show:!1}},plotOptions:{radialBar:{dataLabels:{name:{fontSize:"22px",color:d?"#CBD5E1":"#475569"},value:{fontSize:"16px",color:d?"#CBD5E1":"#475569"},total:{show:!0,label:"\u090F\u0915\u0942\u0928 \u092E\u0924\u0926\u093E\u0930",color:d?"#CBD5E1":"#475569",value:u,formatter:function(){return u}}},track:{background:"#E2E8F0",strokeWidth:"97%"}}},labels:["\u092A\u0941\u0930\u0941\u0937 ","\u092E\u0939\u093F\u0932\u093E ","\u092E\u093E\u0939\u093F\u0924 \u0928\u093E\u0939\u0940"],colors:["#22c55e","#fb923c","#3b82f6"]},series:[x,f,N],type:"radialBar",height:C>S.md?360:250})})},Ee=()=>{var R;const g=[{Header:"\u0928\u093E\u0935",accessor:"fullName",Cell:e=>{var l;return a("span",{className:"flex items-center",children:a("div",{className:"flex-1 text-start",children:a("h4",{className:"text-sm font-medium text-slate-600 whitespace-nowrap",children:(l=e==null?void 0:e.cell)==null?void 0:l.value})})})}},{Header:"",accessor:"_id",Cell:e=>{}},{Header:"\u092A\u0926",accessor:"role",Cell:e=>{var l;return a("span",{children:(l=e==null?void 0:e.cell)==null?void 0:l.value})}},{Header:"\u0915\u093E\u0930\u094D\u0921 \u0928\u0902",accessor:"cardNumber",Cell:e=>{var l;return a("span",{children:(l=e==null?void 0:e.cell)==null?void 0:l.value})}},{Header:"\u092E\u094B\u092C\u093E\u0908\u0932 \u0928\u0902.",accessor:"mobileNumber",Cell:e=>{var l;return a("div",{className:"flex space-x-6 items-center rtl:space-x-reverse",children:s("span",{children:[" ",(l=e==null?void 0:e.cell)==null?void 0:l.value]})})}},{Header:"\u0908\u092E\u0947\u0932",accessor:"email",Cell:e=>{var l;return a("div",{className:"flex space-x-6 items-center rtl:space-x-reverse",children:s("span",{children:[" ",(l=e==null?void 0:e.cell)==null?void 0:l.value]})})}},{Header:"\u0935\u093E\u092A\u0930\u0915\u0930\u094D\u0924\u093E",accessor:"userName",Cell:e=>{var l;return a("div",{className:"flex space-x-6 items-center rtl:space-x-reverse",children:s("span",{children:[" ",(l=e==null?void 0:e.cell)==null?void 0:l.value]})})}},{Header:"\u0928\u0947\u092E\u0932\u0947\u0932\u0940 \u0917\u093E\u0935\u0947",accessor:"villages",Cell:e=>{var r;const l=(r=e==null?void 0:e.cell)==null?void 0:r.value;return a("div",{children:l.map((c,j)=>s("span",{children:[j+1,". ",c.villageName,a("br",{})]},j))})}},{Header:"\u092C\u0926\u0932 \u0915\u0930\u093E",accessor:"",Cell:e=>a("div",{children:a("button",{onClick:()=>{F(!0),I(e.cell.row.values),M(e.cell.row.values._id),y(e.cell.row.values.fullName),f(e.cell.row.values.cardNumber),S(e.cell.row.values.email),d(e.cell.row.values.mobileNumber),T(e.cell.row.values.role),b(e.cell.row.values.userName),m(e.cell.row.values.villages)},children:a(V,{icon:"heroicons:pencil-square"})})})}],P=[{value:"admin",label:"Admin"},{value:"Surveyor",label:"Surveyor"},{value:"Karyakarta",label:"Karyakarta"}],h=localStorage.getItem("token"),A=localStorage.getItem("_id"),[u,M]=t.exports.useState(""),[i,I]=t.exports.useState(null),[x,f]=t.exports.useState(""),[N,y]=t.exports.useState(""),[E,d]=t.exports.useState(""),[C,S]=t.exports.useState(""),[H,T]=t.exports.useState(""),[n,b]=t.exports.useState("");t.exports.useState(""),t.exports.useState(""),t.exports.useState(!1);const[o,m]=t.exports.useState([]),[p,G]=t.exports.useState(!1),[O,K]=t.exports.useState([]),[L,F]=t.exports.useState(!1),[_,W]=t.exports.useState([]),[Ce,q]=t.exports.useState(""),[Se,J]=t.exports.useState(""),Q=t.exports.useMemo(()=>g,[]),X=t.exports.useMemo(()=>_,[_]),Y=()=>G(!p);t.exports.useEffect(()=>{w(),Z()},[]);const w=async()=>{try{const e=await D.get(`${B}/api/getAllUser`);console.log(e.data,"responseeeeeeeeee"),W(e.data.users)}catch(e){console.log(e)}},Z=async()=>{try{const e=await D.get(`${B}/api/surve/getAllVoterVillages/${A}`);K(e.data.village)}catch(e){console.log(e)}},ee=async e=>{e.preventDefault();const l=o.map(c=>({id:c.id,villageName:c.villageName})),r={cardNumber:x,email:C,userName:n,mobileNumber:E,role:H,fullName:N,villages:l};try{const c=await D.post(`${B}/api/updateUser/${u}`,r,{headers:{Authorization:`Bearer ${h}`}});console.log(c.data,"updated Successfully"),F(!1),w()}catch(c){console.log("Error updating user:",c)}},ae=e=>{if(J(e._id),q(e.name),o.some(r=>r.id===e._id))m(o.filter(r=>r.id!==e._id));else{const r={id:e._id,villageName:e.name};m([...o,r])}},le=v.exports.useTable({columns:Q,data:X,initialState:{pageSize:6}},v.exports.useGlobalFilter,v.exports.useSortBy,v.exports.usePagination,v.exports.useRowSelect),{getTableProps:te,getTableBodyProps:se,headerGroups:re,footerGroups:Fe,page:oe,nextPage:ue,previousPage:ne,canNextPage:U,canPreviousPage:$,pageOptions:ce,state:ie,gotoPage:de,pageCount:ke,setPageSize:De,setGlobalFilter:Be,prepareRow:me}=le,{pageIndex:pe,pageSize:Pe}=ie;return s(z,{children:[s("div",{children:[a("div",{className:"overflow-x-auto -mx-6",children:a("div",{className:"inline-block min-w-full align-middle",children:a("div",{className:"overflow-hidden ",children:s("table",{className:"min-w-full divide-y divide-slate-100 table-fixed dark:divide-slate-700",...te,children:[a("thead",{className:" bg-slate-200 dark:bg-slate-700",children:re.map(e=>a("tr",{...e.getHeaderGroupProps(),children:e.headers.map(l=>s("th",{...l.getHeaderProps(l.getSortByToggleProps()),scope:"col",className:" table-th ",children:[l.render("Header"),a("span",{children:l.isSorted?l.isSortedDesc?" \u{1F53D}":" \u{1F53C}":""})]}))}))}),a("tbody",{className:"bg-white divide-y divide-slate-100 dark:bg-slate-800 dark:divide-slate-700",...se,children:oe.map(e=>(me(e),a("tr",{...e.getRowProps(),children:e.cells.map(l=>a("td",{...l.getCellProps(),className:"table-td",children:l.render("Cell")}))})))})]})})})}),a("div",{className:"md:flex md:space-y-0 space-y-5 justify-center mt-6 items-center",children:s("ul",{className:"flex items-center  space-x-3  rtl:space-x-reverse",children:[a("li",{className:"text-xl leading-4 text-slate-900 dark:text-white rtl:rotate-180",children:a("button",{className:` ${$?"":"opacity-50 cursor-not-allowed"}`,onClick:()=>ne(),disabled:!$,children:a(V,{icon:"heroicons-outline:chevron-left"})})}),ce.map((e,l)=>a("li",{children:a("button",{href:"#","aria-current":"page",className:` ${l===pe?"bg-slate-900 dark:bg-slate-600  dark:text-slate-200 text-white font-medium ":"bg-slate-100 dark:bg-slate-700 dark:text-slate-400 text-slate-900  font-normal  "}    text-sm rounded leading-[16px] flex h-6 w-6 items-center justify-center transition-all duration-150`,onClick:()=>de(l),children:e+1})},l)),a("li",{className:"text-xl leading-4 text-slate-900 dark:text-white rtl:rotate-180",children:a("button",{className:` ${U?"":"opacity-50 cursor-not-allowed"}`,onClick:()=>ue(),disabled:!U,children:a(V,{icon:"heroicons-outline:chevron-right"})})})]})})]}),a(be,{title:"\u0928\u0947\u092E\u0932\u0947\u0932\u094D\u092F\u093E \u0917\u093E\u0935\u093E\u0902\u092E\u0927\u094D\u092F\u0947 \u092C\u0926\u0932 \u0915\u0930\u093E",activeModal:L,themeClass:"bg-blue-500 blue:bg-blue-500 blue:border-b blue:border-blue-700",onClose:()=>F(!1),children:s("form",{className:"space-y-5",onSubmit:ee,children:[s("div",{className:"grid grid-cols-2 gap-1",children:[s("div",{className:"mx-2 my-1",children:[a("label",{htmlFor:"voterId",className:"block text-gray-700",children:"Voter ID / \u0913\u0933\u0916\u092A\u0924\u094D\u0930 \u0915\u094D\u0930."}),a("input",{id:"voterId",name:"voterId",type:"text",placeholder:"Enter your Voter ID",value:x,onChange:e=>f(e.target.value),className:"w-full border border-gray-300 rounded-md p-1 focus:outline-none focus:ring-2 focus:ring-[#FFB033]"})]}),s("div",{className:"mx-2 my-1",children:[a("label",{htmlFor:"name",className:"block text-gray-700",children:"Name / \u0928\u093E\u0935"}),a("input",{id:"name",name:"name",type:"text",placeholder:"Enter your name",value:N,onChange:e=>y(e.target.value),className:"w-full border border-gray-300 rounded-md p-1 focus:outline-none focus:ring-2 focus:ring-[#FFB033]"})]}),s("div",{className:"mx-2 my-1",children:[a("label",{htmlFor:"mobile",className:"block text-gray-700",children:"Mobile / \u092E\u094B\u092C\u093E\u0907\u0932"}),a("input",{id:"mobile",name:"mobile",type:"number",placeholder:"Enter your mobile",value:E,onChange:e=>d(e.target.value),className:"w-full border border-gray-300 rounded-md p-1 focus:outline-none focus:ring-2 focus:ring-[#FFB033]"})]}),s("div",{className:"mx-2 my-1",children:[a("label",{htmlFor:"email",className:"block text-gray-700",children:"Email / \u0908\u092E\u0947\u0932"}),a("input",{id:"email",name:"email",type:"email",placeholder:"Enter your email",value:C,onChange:e=>S(e.target.value),className:"w-full border border-gray-300 rounded-md p-1 focus:outline-none focus:ring-2 focus:ring-[#FFB033]"})]}),s("div",{className:"mx-2 my-1",children:[a("label",{htmlFor:"role",className:"block text-gray-700",children:"Role / \u092A\u0926"}),a("select",{id:"role",name:"role",className:"w-full border border-gray-300 rounded-md p-1 focus:outline-none focus:ring-2 focus:ring-[#FFB033]",children:P.map(e=>a(z,{children:a("option",{value:H,onChange:l=>T(l),children:e.label})}))})]}),s("div",{className:"mx-2 my-1",children:[a("label",{htmlFor:"userName",className:"block text-gray-700",children:"UserName / \u0935\u093E\u092A\u0930\u0915\u0930\u094D\u0924\u093E"}),a("input",{id:"userName",name:"userName",type:"text",placeholder:"Enter your User ID",value:n,onChange:e=>b(e.target.value),className:"w-full border border-gray-300 rounded-md p-1 focus:outline-none focus:ring-2 focus:ring-[#FFB033]"})]})]}),s("div",{children:[a("label",{className:"block text-gray-700",children:"Select Villages / \u0917\u093E\u0935"}),s("div",{className:"relative",children:[a("div",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#FFB033] cursor-pointer",onClick:Y,children:((R=i==null?void 0:i.villages)==null?void 0:R.length)>0?i.villages.map(e=>e.villageName).join(", "):"Select villages"}),p&&a("div",{className:"absolute z-10 mt-2 w-full bg-white border border-gray-300 rounded-md shadow-lg max-h-48 overflow-y-auto",children:O.map((e,l)=>a("div",{className:"p-2",children:s("label",{className:"flex items-center",children:[a("input",{type:"checkbox",checked:o.some(r=>r.id===e._id),onChange:()=>ae(e),className:"mr-2"}),e.name]})},l))})]}),s("p",{className:"text-sm text-gray-600 mt-2",children:["Selected: ",o.length>0?o.map(e=>e.villageName).join(", "):"None"]})]}),s("div",{className:"flex gap-4 justify-end items-center",children:[a("button",{type:"submit",className:"btn btn-primary block text-center",children:"Update"}),a("button",{type:"button",className:"btn btn-danger block text-center",onClick:()=>{F(!1)},children:"Close"})]})]})})]})},_e=()=>(t.exports.useState("usa"),s("div",{children:[a(Ne,{title:"Dashboard"}),a("div",{className:"2xl:col-span-9 lg:col-span-8 col-span-12 mb-5",children:a(k,{bodyClass:"p-4",children:a("div",{className:"grid md:grid-cols-5 col-span-1 gap-4",children:a(ve,{})})})}),s("div",{className:"grid grid-cols-12 gap-5",children:[a("div",{className:"lg:col-span-8 col-span-12",children:a(k,{title:"\u091C\u093E\u0938\u094D\u0924 \u092E\u0924\u0926\u093E\u0930 \u0905\u0938\u0932\u0947\u0932\u0947 \u0926\u0939\u093E \u0917\u093E\u0935",children:a("div",{className:"legend-ring",children:a(xe,{})})})}),a("div",{className:"lg:col-span-4 col-span-12",children:a(k,{title:"\u0938\u093E\u0930\u093E\u0902\u0936",children:a(ye,{})})}),a("div",{className:"lg:col-span-12 col-span-12",children:a(k,{title:"\u0915\u093E\u0930\u094D\u092F\u0915\u0930\u094D\u0924\u094D\u092F\u093E\u0902\u091A\u0940 \u092F\u093E\u0926\u0940",noborder:!0,children:a(Ee,{})})})]})]}));export{_e as default};
